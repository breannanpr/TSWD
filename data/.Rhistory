groups[[length(groups) + 1]] = unique(c(i, group))
# function to group similar strings
groupcarstrings = function(similarities) {
groups = list()
for (i in unique(similarities$x.id)) {
group = simiiliarities$similarities[similarities$x.id == i, "y.id"]
groups[[length(groups) + 1]] = unique(c(i, group))
}
}
# read and install cardata into workable dataframe.
cardat = "carbitrage.xlsx"
cardatwb = read_excel(cardat)
# convert to lowercase, remove spaces
normcarcounts = function(category){
category = tolower(category)
category = gsub(" ", "", category)
return(category)
}
# normalize make and model columns
cardatwb = cardatwb %>%
mutate(
make = normcarcounts(make),
model = normcarcounts(model)
)
# find similar makes and models
makesim = stringdist_left_join(cardatwb, cardatwb, by = c("make" = "make"), method = "lv", max_dist = 2)
modelsim = stringdist_left_join(cardatwb, cardatwb, by = c("model" = "model"), method = "lv", max_dist = 2)
library(ggplot2)
library(readxl)
library(writexl)
library(dplyr)
library(fuzzyjoin)
# read and install cardata into workable dataframe.
cardat = "carbitrage.xlsx"
cardatwb = read_excel(cardat)
# convert to lowercase, remove spaces
normcarcounts = function(category){
category = tolower(category)
category = gsub(" ", "", category)
return(category)
}
# normalize make and model columns
cardatwb = cardatwb %>%
mutate(
make = normcarcounts(make),
model = normcarcounts(model)
)
library(readxl)
library(writexl)
"
# read and install cardata into workable dataframe.
cardat = "carbitrage.xlsx"
cardatwb = read_excel(cardat)
setwd("~/GitHub/TSWD")
setwd("C:/Users/breanna.niekamp/OneDrive - The University of Montana/Documents/GitHub/TSWD/data")
# read and install cardata into workable dataframe.
cardat = "carbitrage.xlsx"
cardatwb = read_excel(cardat)
# convert to lowercase, remove spaces
normcarcounts = function(category){
category = tolower(category)
category = gsub(" ", "", category)
return(category)
}
# normalize make and model columns
cardatwb = cardatwb %>%
mutate(
make = normcarcounts(make),
model = normcarcounts(model)
)
# find similar makes and models
makesim = stringdist_left_join(cardatwb, cardatwb, by = c("make" = "make"), method = "lv", max_dist = 2)
# function to group similar strings
groupcarstrings = function(similarities) {
groups = list()
for (i in unique(similarities$x.id)) {
group = simiiliarities$similarities[similarities$x.id == i, "y.id"]
groups[[length(groups) + 1]] = unique(c(i, group))
}
}
return(groups)
# function to group similar strings
groupcarstrings = function(similarities) {
groups = list()
for (i in unique(similarities$x.id)) {
group = simiiliarities$similarities[similarities$x.id == i, "y.id"]
groups[[length(groups) + 1]] = unique(c(i, group))
}
return(groups)
}
